<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Test Webcam Video su Piano A-Frame</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>body, html { margin: 0; height: 100%; overflow: hidden; }</style>
</head>
<body>
  <a-scene embedded>
    <a-assets>
      <video id="webcamVideo" autoplay playsinline muted></video>
    </a-assets>

    <a-plane id="videoPlane" position="0 1.6 -4" width="16" height="9" material="shader: flat;"></a-plane>

    <a-entity camera position="0 1.6 0"></a-entity>
  </a-scene>

<script>
  const video = document.getElementById('webcamVideo');
  const videoPlane = document.getElementById('videoPlane');

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
      video.play();
      video.onloadeddata = () => {
        console.log("Webcam video pronto");
        videoPlane.setAttribute('material', 'shader: flat; src: #webcamVideo');
      };
    })
    .catch(err => {
      alert("Errore accesso webcam: " + err.message);
      console.error(err);
    });
</script>
</body>
</html>
